parameters:
  - name: BaseRepoBranch
    type: string
    default: main

steps: 
  - task: DownloadPipelineArtifact@2
    inputs:
      artifactName: homebrew-formula
      targetPath: homebrew-formula

  - pwsh: git clone https://github.com/Azure/homebrew-azd
    displayName: Clone Azure/homebrew-azd

  - pwsh: |
      Copy-Item homebrew-formula/azd.rb homebrew-azd/Formula/azd.rb

  - pwsh: |
      Get-ChildItem homebrew-azd -Recurse | Select-Object -Property FullName
      Get-Content homebrew-azd/Formula/azd.rb | Write-Host
    displayName: Show homebrew-azd contents